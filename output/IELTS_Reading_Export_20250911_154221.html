<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>雅思阅读</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    :root { --line:#e5e7eb; --bg:#f6f7fb; --panel:#fff; --accent:#3b82f6; --muted:#6b7280; --shadow:0 6px 20px rgba(0,0,0,.12); }
    * { box-sizing: border-box; }
    html,body { height:100%; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); }
    #top-timer-bar { position:fixed; top:0; left:0; width:100%; height:36px; background:rgba(255,255,255,0.97); z-index:9999; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px rgba(0,0,0,.07); }
    #top-timer { font-size:16px; font-weight:600; color:var(--accent); background:#fff; border:1px solid var(--line); border-radius:12px; padding:6px 24px; box-shadow:0 1px 4px rgba(0,0,0,.04); }
    .shell { margin-top:36px; display:flex; height:calc(100vh - 36px); width:100%; }
    .pane { background:var(--panel); overflow:auto; padding:20px; }
    #left { flex: 0 0 50%; min-width: 280px; }
    #right { flex: 1 1 auto; min-width: 320px; background:#fbfbff; border-left:1px solid var(--line); }
    #divider { flex: 0 0 8px; background: linear-gradient(90deg,#e5e7eb,#d1d5db); cursor: ew-resize; position:relative; z-index: 5; user-select:none; }
    #left p { margin: 0 0 12px; line-height: 1.6; word-break: normal; overflow-wrap: normal; hyphens: none; }
    .hl { background:#fff3a3; box-shadow: inset 0 -2px 0 rgba(0,0,0,.05); cursor: pointer; }
    .hl:hover { filter: brightness(0.98); }
    #selbar { position: absolute; display:none; z-index: 2000; background:#111; color:#fff; border-radius: 8px; padding: 6px; box-shadow: 0 6px 20px rgba(0,0,0,.12); font-size: 13px; gap:6px; align-items: center; }
    #selbar button { background: transparent; color:#fff; border: 1px solid rgba(255,255,255,.25); padding: 4px 8px; border-radius: 6px; cursor:pointer; }
    #selbar button:hover { border-color:#fff; }
    #notes { position: fixed; right: 12px; bottom: 12px; width: 320px; height: 42vh; background:#fff; border:1px solid #e5e7eb; border-radius: 12px; display:none; flex-direction: column; z-index:1500; box-shadow: 0 6px 20px rgba(0,0,0,.12); }
    #notes header { display:flex; align-items:center; justify-content: space-between; padding:8px 10px; border-bottom:1px solid #e5e7eb; }
    #notes textarea { flex:1; border:0; padding:10px; resize:none; font-size:14px; line-height:1.5; }
    #toast { position: fixed; left:50%; transform: translateX(-50%); bottom: 24px; background:#111; color:#fff; padding:8px 12px; border-radius: 8px; display:none; z-index:2500; }
  </style>
</head>
<body>
  <div id="top-timer-bar"><span id="top-timer">00:00</span></div>
  <div class="shell">
    <section class="pane" id="left"><h2>阅读材料</h2><div></div></section>
    <div id="divider"></div>
    <section class="pane" id="right"><h4>Questions</h4><div style='border:1px solid #e5e7eb;border-radius:8px;padding:12px;margin-bottom:18px;background:#f9fafb'><div style='color:#64748b;font-size:16px;font-weight:bold;margin-bottom:10px'>Choose TWO letters. There may be more than two options, but only two of them are correct.</div><ol start='1'><li style='margin-bottom:18px'><div style='font-size:16px;margin-bottom:6px'>Which TWO of the following statements about the boys who took part in the study are made by the writer?</div><ul style='list-style:none;padding-left:0;margin:8px 0 0 0;'><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value='They had approximately the same number of friends.' style='margin-right:8px'/> <span>They had approximately the same number of friends.</span></label></li><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value=' Some of their parents helped to set up the camp.' style='margin-right:8px'/> <span> Some of their parents helped to set up the camp.</span></label></li><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value='They selected the group that they wanted to be in.' style='margin-right:8px'/> <span>They selected the group that they wanted to be in.</span></label></li><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value=' They were responsible for bringing their own tents.' style='margin-right:8px'/> <span> They were responsible for bringing their own tents.</span></label></li><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value='They received clothes that identified the group they belonged to.' style='margin-right:8px'/> <span>They received clothes that identified the group they belonged to.</span></label></li><li style='margin-bottom:6px'><label style='display:flex;align-items:center;font-size:15px;'><input type='radio' name='group1_q1' value='Some of them were criticised for dropping litter.' style='margin-right:8px'/> <span>Some of them were criticised for dropping litter.</span></label></li></ul></li></ol></div>
      <div id="answer-summary" style="margin-top:12px;padding:16px 12px;border-top:1px solid #e5e7eb;background:#f6f7fb;border-radius:8px;">
        <div id="completed-list" style="font-size:15px;color:#3b82f6;display:none;"></div>
        <div style="margin-top:18px;">
          <button id="btnSubmit" style="background:#3b82f6;color:#fff;border:none;border-radius:8px;padding:8px 20px;font-size:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;margin-right:12px;">Submit</button>
          <button id="btnReset" style="background:#64748b;color:#fff;border:none;border-radius:8px;padding:8px 20px;font-size:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;">Reset</button>
        </div>
        <div id="score-result" style="margin-top:18px;font-size:17px;font-weight:bold;color:#eab308;"></div>
      </div>
    </section>
  </div>
  <div class="practice-nav" id="practice-nav" style="background:#fff;border-top:2px solid #e5e7eb;padding:12px 20px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 4px rgba(0,0,0,.05);flex-wrap:wrap;position:fixed;left:0;right:0;bottom:0;z-index:4000;">
    <span class="title" style="font-weight:600;color:#64748b;">Questions</span>
    <div class="questions" id="nav-questions" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;"></div>
  </div>
  <script>
    // 题号导航条逻辑
    function updateNavQuestions() {
      const questions = getAllQuestions();
      const nav = document.getElementById('nav-questions');
      nav.innerHTML = '';
      questions.forEach((q, i) => {
        let sel = Array.from(q.radios).find(r=>r.checked);
        const btn = document.createElement('button');
        btn.textContent = i+1;
        btn.style.background = sel ? '#3b82f6' : '#e5e7eb';
        btn.style.color = sel ? '#fff' : '#64748b';
        btn.style.border = 'none';
        btn.style.borderRadius = '8px';
        btn.style.padding = '6px 12px';
        btn.style.fontWeight = 'bold';
        btn.style.fontSize = '15px';
        btn.style.cursor = 'pointer';
        btn.onclick = function() {
          q.el.scrollIntoView({behavior:'smooth',block:'center'});
        };
        nav.appendChild(btn);
      });
    }
    document.getElementById('right').addEventListener('change', function(e){
      if(e.target.type==='radio') {
        updateCompletedList();
        updateNavQuestions();
      }
    });
    updateNavQuestions();
    // 顶部计时器
    let _t=0; const _timerEl=document.getElementById('top-timer');
    setInterval(function(){ 
      _t++; 
      var m=String(Math.floor(_t/60)).padStart(2,'0'); 
      var s=String(_t%60).padStart(2,'0'); 
      _timerEl.textContent=m+':'+s; 
    },1000);

    // 答题统计与批改功能
    function getAllQuestions() {
      const qBlocks = document.querySelectorAll('#right ol > li');
      let questions = [];
      qBlocks.forEach((li, idx) => {
        const radios = li.querySelectorAll('input[type=radio]');
        if(radios.length) {
          questions.push({
            el: li,
            radios,
            idx,
            selected: null,
            correct: null
          });
        }
      });
      return questions;
    }
    function updateCompletedList() {
      // 默认隐藏，仅批改后显示
      document.getElementById('completed-list').style.display = 'none';
    }
    document.getElementById('right').addEventListener('change', function(e){
      if(e.target.type==='radio') updateCompletedList();
    });
    updateCompletedList();

    // 交卷批改功能
    document.getElementById('btnSubmit').onclick = function() {
      const questions = getAllQuestions();
      let correctCount = 0;
      let total = questions.length;
      let detailHtml = '';
      questions.forEach((q, i) => {
        let answer = null;
        q.radios.forEach(r => {
          if(r.dataset.answer==='true') answer = r.value;
        });
        let sel = Array.from(q.radios).find(r=>r.checked);
        let userAns = sel ? sel.value : 'Not selected';
        if(sel && answer && sel.value===answer) {
          correctCount++;
          q.el.style.background = '#e6ffed';
          // 做对了不显示用户答案
          detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#10b981'>${answer || '-'}</span></div>`;
        } else {
          q.el.style.background = sel ? '#ffe4e6' : '';
          // 做错了显示用户答案为红色
          detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#ef4444;font-weight:bold'>${userAns}</span> / <span style='color:#10b981'>${answer || '-'}</span></div>`;
        }
      });
      document.getElementById('score-result').innerHTML = `Correct Answers：${correctCount} / ${total}<div style='margin-top:10px;'>${detailHtml}</div>`;
    };
    // 重置答题
    document.getElementById('btnReset').onclick = function() {
      const questions = getAllQuestions();
      questions.forEach(q => {
        q.radios.forEach(r => r.checked=false);
        q.el.style.background = '';
      });
      document.getElementById('score-result').textContent = '';
      updateCompletedList();
    };
  // ...existing code...
  </script>
</body>
</html>
