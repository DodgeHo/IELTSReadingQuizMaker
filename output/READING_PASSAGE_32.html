<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>READING PASSAGE 3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    :root { --line:#e5e7eb; --bg:#f6f7fb; --panel:#fff; --accent:#3b82f6; --muted:#6b7280; --shadow:0 6px 20px rgba(0,0,0,.12); }
    * { box-sizing: border-box; }
    html,body { height:100%; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); }
    #top-timer-bar { position:fixed; top:0; left:0; width:100%; height:36px; background:rgba(255,255,255,0.97); z-index:9999; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px rgba(0,0,0,.07); }
    #top-timer { font-size:16px; font-weight:600; color:var(--accent); background:#fff; border:1px solid var(--line); border-radius:12px; padding:6px 24px; box-shadow:0 1px 4px rgba(0,0,0,.04); }
    .shell { margin-top:36px; display:flex; height:calc(100vh - 36px); width:100%; }
    .pane { background:var(--panel); overflow:auto; padding:20px; }
    #left { flex: 0 0 50%; min-width: 280px; }
    #right { flex: 1 1 auto; min-width: 320px; background:#fbfbff; border-left:1px solid var(--line); }
    #divider { flex: 0 0 8px; background: linear-gradient(90deg,#e5e7eb,#d1d5db); cursor: ew-resize; position:relative; z-index: 5; user-select:none; }
    #left p { margin: 0 0 12px; line-height: 1.6; word-break: normal; overflow-wrap: normal; hyphens: none; }
    /* 表格样式 */
    table { border-collapse: collapse; width: 100%; margin: 12px 0; }
    th, td { border: 1px solid var(--line); padding: 8px 12px; text-align: left; vertical-align: top; }
    th { background: #f8fafc; font-weight: bold; }
    td { background: #fff; }
    /* ReactQuill生成的样式支持 */
    .ql-align-center { text-align: center; }
    .ql-align-right { text-align: right; }
    .ql-align-left { text-align: left; }
    .ql-align-justify { text-align: justify; }
    .ql-indent-1 { margin-left: 2em; }
    .ql-indent-2 { margin-left: 4em; }
    .ql-indent-3 { margin-left: 6em; }
    .ql-indent-4 { margin-left: 8em; }
    .ql-indent-5 { margin-left: 10em; }
    .ql-indent-6 { margin-left: 12em; }
    .ql-indent-7 { margin-left: 14em; }
    .ql-indent-8 { margin-left: 16em; }
    h1.ql-align-center, h2.ql-align-center, h3.ql-align-center, h4.ql-align-center, h5.ql-align-center, h6.ql-align-center { text-align: center; }
    h1.ql-align-right, h2.ql-align-right, h3.ql-align-right, h4.ql-align-right, h5.ql-align-right, h6.ql-align-right { text-align: right; }
    h1.ql-align-justify, h2.ql-align-justify, h3.ql-align-justify, h4.ql-align-justify, h5.ql-align-justify, h6.ql-align-justify { text-align: justify; }
    p.ql-align-center, p.ql-align-right, p.ql-align-justify { margin: 0 0 12px; line-height: 1.6; }
    .hl { background:#fff3a3; box-shadow: inset 0 -2px 0 rgba(0,0,0,.05); cursor: pointer; }
    .hl:hover { filter: brightness(0.98); }
    #selbar { position: absolute; display:none; z-index: 2000; background:#111; color:#fff; border-radius: 8px; padding: 6px; box-shadow: 0 6px 20px rgba(0,0,0,.12); font-size: 13px; gap:6px; align-items: center; }
    #selbar button { background: transparent; color:#fff; border: 1px solid rgba(255,255,255,.25); padding: 4px 8px; border-radius: 6px; cursor:pointer; }
    #selbar button:hover { border-color:#fff; }
    #notes { position: fixed; right: 12px; bottom: 12px; width: 320px; height: 42vh; background:#fff; border:1px solid #e5e7eb; border-radius: 12px; display:none; flex-direction: column; z-index:1500; box-shadow: 0 6px 20px rgba(0,0,0,.12); }
    #notes header { display:flex; align-items:center; justify-content: space-between; padding:8px 10px; border-bottom:1px solid #e5e7eb; }
    #notes textarea { flex:1; border:0; padding:10px; resize:none; font-size:14px; line-height:1.5; }
    #toast { position: fixed; left:50%; transform: translateX(-50%); bottom: 24px; background:#111; color:#fff; padding:8px 12px; border-radius: 8px; display:none; z-index:2500; }
  </style>
</head>
<body>
  <div id="top-timer-bar"><span id="top-timer">00:00</span></div>
  <div class="shell">
    <section class="pane" id="left"><h2>READING PASSAGE 3</h2><div><p>You should spend about 20 minutes on Questions 27–40, which are based on Reading Passage 3 below.</p><h2 class="ql-align-center">The Robbers Cave Study</h2><p><em>A review of a famous study into group behaviour</em></p><p>Group self-centredness seems to occur the minute people are divided into groups. It doesn’t matter what the group is, or on what basis it was formed, we perceive the group we belong to as being superior to other groups and we develop an ‘in-group’ bias.</p><p>Probably one of the most famous pieces of research looking at group behaviour was a field study conducted by Sherif in 1956. This study involved 22 boys aged between 11 and 12, who were divided into two groups. The groups were roughly matched in terms of sporting ability, camping experience and general popularity among their peers. Their parents were told that they were going to a three-week summer camp to see how well they would work alongside other boys when put into different teams. The parents were also told that the boys would not be allowed to be visited during that time, but would be able to go home if they wanted to. It was intended that the data for the study would be collected by participant observers.</p><p>At first, neither set of boys knew of the existence of the other set. They were taken to their respective campsites, which were located on a 200-acre, densely wooded area in Robbers Cave State Park, Oklahoma. The first week was spent doing a variety of activities, such as pitching tents and cooking. During this week, the two groups seemed to develop different group norms, one group being more ‘tough’ than the other, from which two boys went home early, as they were homesick. The groups were given a set of caps and T-shirts, and gave themselves names: the ‘Eagles’ and the ‘Rattlers’ (the latter being the tougher group).</p><p>At the end of the first week, they became aware of each other’s existence by finding litter left by the other group or overhearing voices. Sherif noticed that already the groups had started to refer to the other group as ‘them’ and their group as ‘us’. This marked the beginning of phase two of the experiment.</p><p>The groups were told that they were going to take part in a ‘Grand Tournament’, which involved ten different sporting events, and they were shown the prizes for winning. The tournament was also to include in the final scores points which would be awarded for other activities, such as how tidy the cabins were kept. These scores were displayed on big scoreboards in what now became a joint hall where the two groups ate their meals together. This was necessary so the two groups would think they were on almost equal scores in the time leading up to the final event, which would increase the sense of competition. Needless to say, these scores were manipulated by the experimenters.</p><p>In order to check how high the levels of group self-centredness were in the groups at this time, a number of tasks were set up which involved the groups rating their own members and members of the other group. Each time, group members rated the boys in their own group much better at the tasks than the other boys, even though there was no real difference between them. They were also asked to rate all others in terms of how desirable they were as friends, and 93 per cent of friendship preferences were in-group preferences.</p><p>When the tournament started, the first game was basketball. The group that was thought to be less tough lost the game and claimed that they had lost only because the other group were bigger and older than they were. The Eagles won the next ball game and then were said to be cheating in the tug-of-war. This resulted in visits by both groups to each other’s cabins over the course of the next 24 hours, where they ripped the mosquito nets, turned over the beds and generally made a mess. The Eagles devised a new weapon in the conflict which consisted of ‘rocks in socks’ – and so it went on. Eventually, the Eagles won the tournament (with some help from the experimenters) and it was time for phase three to begin.</p><p>Research has suggested that the best way to reduce group conflict is by non-competitive contact. This required two conditions: that the groups had equal status and that they had a common goal to work towards. This was exactly what Sherif engineered. There were actually seven situations organised which gave the groups equal-status contact; these were things like having meals together or watching films together. The meals resulted in food fights; the films were enjoyed by both groups sitting totally apart from each other.</p><p>The other situations, where the groups had to work for common goals, had a much better outcome. These included raising money to go and see a film and solving problems, such as one with the water supply. The final common goal was a visit by truck to Cedar Lake to camp there before the end of the holiday. In this situation, although both groups travelled in separate trucks, another problem-solving situation arose when one of the trucks became stuck. All the boys joined in, using one of the tug-of-war ropes to help move it. At this point the group boundaries were beginning to disappear. On the final day, when they were due to return home, the boys themselves suggested that they travel in one bus and sat in friendship groups rather than as Eagles and Rattlers.</p></div></section>
    <div id="divider"></div>
    <section class="pane" id="right"><h4>Questions</h4><div style='border:1px solid #e5e7eb;border-radius:8px;padding:12px;margin-bottom:18px;background:#f9fafb'><div style='margin-bottom:15px'><p>Complete the table below.</p><p>Choose <em>NO MORE THAN TWO WORDS</em> from the passage for each answer.</p></div><div style='margin-bottom:18px;padding:12px;background:#fff;border-radius:6px'><div style='font-size:16px;line-height:1.6'><table><tr><td style="font-weight:bold;background:#f8fafc;">Conditions</td><td style="font-weight:bold;background:#f8fafc;">Type of situation</td><td style="font-weight:bold;background:#f8fafc;">Result</td></tr><tr><td>Equal status</td><td>eating</td><td><input type='text' class='blank-input' data-answer='food fights' data-question-num='1' placeholder='1' style='width:120px;margin:0 4px;border:1px solid #ccc;padding:2px 4px'/></td></tr><tr><td></td><td><input type='text' class='blank-input' data-answer='watching films' data-question-num='2' placeholder='2' style='width:120px;margin:0 4px;border:1px solid #ccc;padding:2px 4px'/></td><td>enjoyed them but were not sitting together</td></tr><tr><td>A <input type='text' class='blank-input' data-answer='common goal' data-question-num='3' placeholder='3' style='width:120px;margin:0 4px;border:1px solid #ccc;padding:2px 4px'/></td><td>raising money</td><td></td></tr><tr><td></td><td><input type='text' class='blank-input' data-answer='problem solving' data-question-num='4' placeholder='4' style='width:120px;margin:0 4px;border:1px solid #ccc;padding:2px 4px'/>, e.g. stuck truck</td><td>friendship groups</td></tr></table></div></div></div>
      <div id="answer-summary" style="margin-top:12px;padding:16px 12px;border-top:1px solid #e5e7eb;background:#f6f7fb;border-radius:8px;">
        <div id="completed-list" style="font-size:15px;color:#3b82f6;display:none;"></div>
        <div style="margin-top:18px;">
          <button id="btnSubmit" style="background:#3b82f6;color:#fff;border:none;border-radius:8px;padding:8px 20px;font-size:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;margin-right:12px;">Submit</button>
          <button id="btnReset" style="background:#64748b;color:#fff;border:none;border-radius:8px;padding:8px 20px;font-size:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;">Reset</button>
        </div>
        <div id="score-result" style="margin-top:18px;font-size:17px;font-weight:bold;color:#eab308;"></div>
      </div>
    </section>
  </div>
  <div class="practice-nav" id="practice-nav" style="background:#fff;border-top:2px solid #e5e7eb;padding:12px 20px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 4px rgba(0,0,0,.05);flex-wrap:wrap;position:fixed;left:0;right:0;bottom:0;z-index:4000;">
    <span class="title" style="font-weight:600;color:#64748b;">Questions</span>
    <div class="questions" id="nav-questions" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;"></div>
  </div>
  <script>
    // 题号导航条逻辑
    function updateNavQuestions() {
      const questions = getAllQuestions();
      const nav = document.getElementById('nav-questions');
      nav.innerHTML = '';
      questions.forEach((q, i) => {
        let hasAnswer = false;
        if(q.type === 'blank') {
          hasAnswer = q.input.value.trim() !== '';
        } else {
          hasAnswer = Array.from(q.radios).some(r => r.checked);
        }
        const btn = document.createElement('button');
        btn.textContent = q.questionNum || (i+1);
        btn.style.background = hasAnswer ? '#3b82f6' : '#e5e7eb';
        btn.style.color = hasAnswer ? '#fff' : '#64748b';
        btn.style.border = 'none';
        btn.style.borderRadius = '8px';
        btn.style.padding = '6px 12px';
        btn.style.fontWeight = 'bold';
        btn.style.fontSize = '15px';
        btn.style.cursor = 'pointer';
        btn.onclick = function() {
          q.el.scrollIntoView({behavior:'smooth',block:'center'});
        };
        nav.appendChild(btn);
      });
    }
    document.getElementById('right').addEventListener('change', function(e){
      if(e.target.type==='radio' || e.target.type==='checkbox' || e.target.className==='blank-input') {
        updateCompletedList();
        updateNavQuestions();
      }
    });
    // 监听填空题的输入事件
    document.getElementById('right').addEventListener('input', function(e){
      if(e.target.className==='blank-input') {
        updateNavQuestions();
      }
    });
    updateNavQuestions();
    // 顶部计时器
    let _t=0; const _timerEl=document.getElementById('top-timer');
    setInterval(function(){ 
      _t++; 
      var m=String(Math.floor(_t/60)).padStart(2,'0'); 
      var s=String(_t%60).padStart(2,'0'); 
      _timerEl.textContent=m+':'+s; 
    },1000);

    // 答题统计与批改功能
    function getAllQuestions() {
      const qBlocks = document.querySelectorAll('#right ol > li');
      const blankInputs = document.querySelectorAll('#right input.blank-input');
      let questions = [];
      
      // 处理选择题（在ol中）
      qBlocks.forEach((block, idx) => {
        const radios = block.querySelectorAll('input[type=radio],input[type=checkbox]');
        if(radios.length) {
          questions.push({
            el: block,
            radios,
            idx: questions.length,
            selected: null,
            correct: null,
            type: radios[0].type === 'checkbox' ? 'multi' : 'single'
          });
        }
      });
      
      // 处理填空题（每个空位单独作为一道题）
      blankInputs.forEach((input, idx) => {
        questions.push({
          el: input.closest('div'), // 找到包含的div
          input: input,
          idx: questions.length,
          type: 'blank',
          questionNum: input.dataset.questionNum || (questions.length + 1)
        });
      });
      
      return questions;
    }
    function updateCompletedList() {
      // 默认隐藏，仅批改后显示
      document.getElementById('completed-list').style.display = 'none';
    }
    document.getElementById('right').addEventListener('change', function(e){
      if(e.target.type==='radio') updateCompletedList();
    });
    updateCompletedList();

    // 交卷批改功能
    document.getElementById('btnSubmit').onclick = function() {
      const questions = getAllQuestions();
      let correctCount = 0;
      let total = questions.length;
      let detailHtml = '';
      questions.forEach((q, i) => {
        if(q.type==='blank') {
          const correctAns = (q.input.dataset.answer || '').split(';').map(s=>s.trim().toLowerCase()).filter(s=>s);
          const userAns = (q.input.value || '').trim().toLowerCase();
          const qNum = q.questionNum || (i+1);
          if(userAns && correctAns.includes(userAns)) {
            correctCount++;
            q.input.style.background = '#e6ffed';
            detailHtml += `<div style='margin-bottom:4px'>Q${qNum}: <span style='color:#10b981'>${q.input.value}</span></div>`;
          } else {
            q.input.style.background = userAns ? '#ffe4e6' : '';
            detailHtml += `<div style='margin-bottom:4px'>Q${qNum}: <span style='color:#ef4444;font-weight:bold'>${q.input.value||'-'}</span> / <span style='color:#10b981'>${q.input.dataset.answer||'-'}</span></div>`;
          }
        } else {
          let answer = null;
          if(q.type==='multi') {
            // 多选题，正确答案可能有多个
            let correctArr = [];
            q.radios.forEach(r => {
              if(r.dataset.answer==='true') correctArr.push(r.value);
            });
            let userArr = Array.from(q.radios).filter(r=>r.checked).map(r=>r.value);
            let isCorrect = userArr.length===correctArr.length && userArr.every(v=>correctArr.includes(v));
            if(isCorrect && userArr.length) {
              correctCount++;
              q.el.style.background = '#e6ffed';
              detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#10b981'>${userArr.join(', ')}</span></div>`;
            } else {
              q.el.style.background = userArr.length ? '#ffe4e6' : '';
              detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#ef4444;font-weight:bold'>${userArr.join(', ')||'Not selected'}</span> / <span style='color:#10b981'>${correctArr.join(', ')||'-'}</span></div>`;
            }
          } else {
            q.radios.forEach(r => {
              if(r.dataset.answer==='true') answer = r.value;
            });
            let sel = Array.from(q.radios).find(r=>r.checked);
            let userAns = sel ? sel.value : 'Not selected';
            if(sel && answer && sel.value===answer) {
              correctCount++;
              q.el.style.background = '#e6ffed';
              detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#10b981'>${answer || '-'}</span></div>`;
            } else {
              q.el.style.background = sel ? '#ffe4e6' : '';
              detailHtml += `<div style='margin-bottom:6px;'>Q${i+1}: <span style='color:#ef4444;font-weight:bold'>${userAns}</span> / <span style='color:#10b981'>${answer || '-'}</span></div>`;
            }
          }
        }
      });
      document.getElementById('score-result').innerHTML = `Correct Answers：${correctCount} / ${total}<div style='margin-top:10px;'>${detailHtml}</div>`;
    };
    // 重置答题
    document.getElementById('btnReset').onclick = function() {
      const questions = getAllQuestions();
      questions.forEach(q => {
        if(q.type === 'blank') {
          q.input.value = '';
          q.input.style.background = '';
        } else {
          q.radios.forEach(r => r.checked=false);
        }
        q.el.style.background = '';
      });
      document.getElementById('score-result').textContent = '';
      updateCompletedList();
      updateNavQuestions();
    };
  // ...existing code...
  </script>
</body>
</html>
